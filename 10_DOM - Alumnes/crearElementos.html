<!DOCTYPE html>
<html lang="en">

<head>
      <meta charset="UTF-8">
      <title>Añadir elementos con DOM</title>
      <link rel="stylesheet" type="text/css" href="w3css/w3css.css">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">

      <style>
            #texto_nuevo,
            #borrar_nuevos {
                  display: none;
                  margin-bottom: 10px;
            }

            .show {
                  display: block !important;
            }

            .show_button {
                  display: inline-block !important;
            }
      </style>

</head>

<body>
      <div class="w3-container">
            <h2>Clicka sobre el boton para añadir mas elementos a la lista</h2>
            <ul id="lista" class="w3-ul w3-lime w3-hoverable">
                  <li>Lorem ipsum dolor sit amet</li>
                  <li>Consectetuer adipiscing elit</li>
                  <li>Sed mattis enim vitae orci</li>
                  <li>Phasellus libero</li>
                  <li>Maecenas nisl arcu</li>
            </ul>

            <input type="text" class="" name="texto_nuevo" id="texto_nuevo" />

            <input id="more" type="button" class="w3-button w3-white w3-border" value="Añadir elemento" />
            <input id="less" type="button" class="w3-button w3-white w3-border" value="Borrar elemento" />

            <button id="borrar_nuevos">Borra todo lo nuevo</button>
      </div>
      
<script>

      let contador = 0;

      const more = document.querySelector("#more");
      const less = document.querySelector("#less");
      const textoNuevo = document.querySelector("#texto_nuevo");
      const borrar_nuevos = document.querySelector("#borrar_nuevos");


      const crearElemento = () =>{
            textoNuevo.classList.toggle("show");
            textoNuevo.focus();

            if(textoNuevo.value.length > 0){
                  let elem = document.createElement("li");
                  let content = document.createTextNode(textoNuevo.value);
                  let lista = document.querySelector("#lista");

                  elem.appendChild(content);
                  lista.appendChild(elem);
                  textoNuevo.value = "";
                  contador++;
            };

            if(contador > 0 && contador < 2){
                  borrar_nuevos.classList.add("show_button");
            }
      };

      const borrarhijo = () =>{
            let list = document.getElementById("lista");
            if (contador > 0){
                  list.removeChild(list.lastChild);
                  contador--;
            }
      };

      less.addEventListener("click", borrarhijo);
      more.addEventListener("click", crearElemento);

      borrar_nuevos.addEventListener("click", () => {
            if(contador > 0){
                  let list = document.getElementById("lista");
                  for(let y = contador; y >  0; y--){
                        list.removeChild(list.lastChild);
                  }
                  contador = 0;
                  borrar_nuevos.classList.remove("show_button");
            }
      })


</script>


</body>

</html>